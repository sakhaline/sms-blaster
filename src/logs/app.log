2024-05-29 14:13 UTC - INFO - src.utils.csv_json:convert_csv_to_json:37 - CONVERTED CSV [/home/sakhaline/ACTSE/davydov/sms_blaster/src/data/test_data/contacts-10000.csv] TO JSON [/home/sakhaline/ACTSE/davydov/sms_blaster/src/data/contacts.json]
<<<<<<< HEAD
2024-05-29 12:08 UTC - INFO - __main__:telnyx_webhook:13 - WEBHOOK TRIGGERED
2024-05-29 12:08 UTC - ERROR - __main__:telnyx_webhook:22 - Error processing webhook: 'NoneType' object has no attribute 'resume_reading'
2024-05-29 12:08 UTC - INFO - __main__:telnyx_webhook:13 - WEBHOOK TRIGGERED
2024-05-29 12:08 UTC - ERROR - __main__:telnyx_webhook:22 - Error processing webhook: 'NoneType' object has no attribute 'resume_reading'
2024-05-29 12:08 UTC - INFO - __main__:telnyx_webhook:13 - WEBHOOK TRIGGERED
2024-05-29 12:08 UTC - ERROR - __main__:telnyx_webhook:22 - Error processing webhook: 'NoneType' object has no attribute 'resume_reading'
2024-05-29 12:08 UTC - INFO - __main__:telnyx_webhook:13 - WEBHOOK TRIGGERED
2024-05-29 12:08 UTC - ERROR - __main__:telnyx_webhook:22 - Error processing webhook: 'NoneType' object has no attribute 'resume_reading'
2024-05-29 12:10 UTC - INFO - __main__:telnyx_webhook:13 - WEBHOOK TRIGGERED
2024-05-29 12:10 UTC - ERROR - __main__:telnyx_webhook:22 - Error processing webhook: 'NoneType' object has no attribute 'resume_reading'
2024-05-29 12:10 UTC - INFO - __main__:telnyx_webhook:13 - WEBHOOK TRIGGERED
2024-05-29 12:10 UTC - ERROR - __main__:telnyx_webhook:22 - Error processing webhook: 'NoneType' object has no attribute 'resume_reading'
2024-05-29 12:15 UTC - INFO - __main__:telnyx_webhook:10 - WEBHOOK TRIGGERED
2024-05-29 12:15 UTC - ERROR - __main__:telnyx_webhook:19 - Error processing webhook: 'text'
2024-05-29 12:15 UTC - INFO - __main__:telnyx_webhook:10 - WEBHOOK TRIGGERED
2024-05-29 12:15 UTC - ERROR - __main__:telnyx_webhook:19 - Error processing webhook: 'text'
=======
2024-05-29 15:08 UTC - INFO - src.utils.utils:format_phone_number:57 - FORMATTED PHONE NUMBER -- FROM - +15874016373 - TO - +15874016373
2024-05-29 15:08 UTC - INFO - src.services.telnyx_api:send_sms:47 - SUCCESSFULLY SENT TELNYX MESSAGE TO +16297580011.
                        MESSAGE ID: 40318fc4-401f-4f3a-beeb-67ffd05bf33f
2024-05-29 15:08 UTC - INFO - src.services.telnyx_service:telnyx_sender:39 - TELNYX CONTACT UPDATED SUCCESSFULLY!!! ^_^
2024-05-29 15:08 UTC - INFO - src.services.telnyx_api:check_delivery_status:28 - SUCCESSFULLY CHECKED TELNYX DELIVERY STATUS FOR - 40318fc4-401f-4f3a-beeb-67ffd05bf33f.
                        STATUS sent
2024-05-29 15:08 UTC - ERROR - src.services.telnyx_api:check_delivery_status:31 - FAIL TO CHECK TELNYX DELIVERY STATUS. ERROR:  {
  "errors": [
    {
      "code": "40303",
      "title": "Message not found",
      "detail": "The message with ID 40318fc4-401f-4f3a-beeb-67ffd05bf33f was not found.",
      "meta": {
        "url": "https://developers.telnyx.com/docs/overview/errors/40303"
      }
    }
  ]
}
>>>>>>> 315a480b61aa937bbf3d949a3aa33bdeaf2c5c5f
2024-05-29 12:24 UTC - INFO - __main__:telnyx_webhook:11 - WEBHOOK TRIGGERED
2024-05-29 12:24 UTC - DEBUG - src.services.ghl_service:ghl_processor:25 - {'event_type': 'message.received', 'id': '0f5ae253-4477-4e76-9e2b-370922fe591a', 'occurred_at': '2024-05-29T12:24:09.280+00:00', 'payload': {'autoresponse_type': None, 'cc': [], 'completed_at': None, 'cost': None, 'direction': 'inbound', 'encoding': 'GSM-7', 'errors': [], 'from': {'carrier': '', 'line_type': 'Wireline', 'phone_number': '+15874016373'}, 'id': 'ff9e6aa2-9e93-4728-b002-946d53e7d513', 'is_spam': False, 'media': [], 'messaging_profile_id': '40018fc0-1345-4910-9c4b-07175988d9c9', 'organization_id': 'a47457cb-053c-487d-9ce6-aff2accebc3c', 'parts': 1, 'received_at': '2024-05-29T12:24:09.157+00:00', 'record_type': 'message', 'sent_at': None, 'subject': '', 'tags': [], 'text': 'Hello. This is a test message', 'to': [{'carrier': 'Telnyx', 'line_type': 'Wireless', 'phone_number': '+16297580011', 'status': 'webhook_delivered'}], 'type': 'SMS', 'valid_until': None, 'webhook_failover_url': None, 'webhook_url': 'http://185.69.153.62:5000/'}, 'record_type': 'event'}
2024-05-29 12:24 UTC - ERROR - __main__:telnyx_webhook:20 - Error processing webhook: 'text'
2024-05-29 12:24 UTC - INFO - __main__:telnyx_webhook:11 - WEBHOOK TRIGGERED
2024-05-29 12:24 UTC - DEBUG - src.services.ghl_service:ghl_processor:25 - {'event_type': 'message.received', 'id': '0f5ae253-4477-4e76-9e2b-370922fe591a', 'occurred_at': '2024-05-29T12:24:09.280+00:00', 'payload': {'autoresponse_type': None, 'cc': [], 'completed_at': None, 'cost': None, 'direction': 'inbound', 'encoding': 'GSM-7', 'errors': [], 'from': {'carrier': '', 'line_type': 'Wireline', 'phone_number': '+15874016373'}, 'id': 'ff9e6aa2-9e93-4728-b002-946d53e7d513', 'is_spam': False, 'media': [], 'messaging_profile_id': '40018fc0-1345-4910-9c4b-07175988d9c9', 'organization_id': 'a47457cb-053c-487d-9ce6-aff2accebc3c', 'parts': 1, 'received_at': '2024-05-29T12:24:09.157+00:00', 'record_type': 'message', 'sent_at': None, 'subject': '', 'tags': [], 'text': 'Hello. This is a test message', 'to': [{'carrier': 'Telnyx', 'line_type': 'Wireless', 'phone_number': '+16297580011', 'status': 'webhook_delivered'}], 'type': 'SMS', 'valid_until': None, 'webhook_failover_url': None, 'webhook_url': 'http://185.69.153.62:5000/'}, 'record_type': 'event'}
2024-05-29 12:24 UTC - ERROR - __main__:telnyx_webhook:20 - Error processing webhook: 'text'
2024-05-29 12:32 UTC - INFO - __main__:telnyx_webhook:11 - WEBHOOK TRIGGERED
2024-05-29 12:32 UTC - DEBUG - src.services.ghl_service:ghl_processor:25 - {'event_type': 'message.received', 'id': '4119bbd0-ea11-412c-a5ed-9f210f09732b', 'occurred_at': '2024-05-29T12:32:48.595+00:00', 'payload': {'autoresponse_type': None, 'cc': [], 'completed_at': None, 'cost': None, 'direction': 'inbound', 'encoding': 'GSM-7', 'errors': [], 'from': {'carrier': '', 'line_type': 'Wireline', 'phone_number': '+15874016373'}, 'id': 'd5a5b03c-d9ba-4116-8bed-2ca7a661c8a4', 'is_spam': False, 'media': [], 'messaging_profile_id': '40018fc0-1345-4910-9c4b-07175988d9c9', 'organization_id': 'a47457cb-053c-487d-9ce6-aff2accebc3c', 'parts': 1, 'received_at': '2024-05-29T12:32:48.453+00:00', 'record_type': 'message', 'sent_at': None, 'subject': '', 'tags': [], 'text': 'Hi. This is outbound message for you', 'to': [{'carrier': 'Telnyx', 'line_type': 'Wireless', 'phone_number': '+16297580011', 'status': 'webhook_delivered'}], 'type': 'SMS', 'valid_until': None, 'webhook_failover_url': None, 'webhook_url': 'http://185.69.153.62:5000/'}, 'record_type': 'event'}
2024-05-29 12:32 UTC - ERROR - __main__:telnyx_webhook:20 - Error processing webhook: 'NoneType' object is not iterable
2024-05-29 12:32 UTC - INFO - __main__:telnyx_webhook:11 - WEBHOOK TRIGGERED
2024-05-29 12:32 UTC - DEBUG - src.services.ghl_service:ghl_processor:25 - {'event_type': 'message.received', 'id': '4119bbd0-ea11-412c-a5ed-9f210f09732b', 'occurred_at': '2024-05-29T12:32:48.595+00:00', 'payload': {'autoresponse_type': None, 'cc': [], 'completed_at': None, 'cost': None, 'direction': 'inbound', 'encoding': 'GSM-7', 'errors': [], 'from': {'carrier': '', 'line_type': 'Wireline', 'phone_number': '+15874016373'}, 'id': 'd5a5b03c-d9ba-4116-8bed-2ca7a661c8a4', 'is_spam': False, 'media': [], 'messaging_profile_id': '40018fc0-1345-4910-9c4b-07175988d9c9', 'organization_id': 'a47457cb-053c-487d-9ce6-aff2accebc3c', 'parts': 1, 'received_at': '2024-05-29T12:32:48.453+00:00', 'record_type': 'message', 'sent_at': None, 'subject': '', 'tags': [], 'text': 'Hi. This is outbound message for you', 'to': [{'carrier': 'Telnyx', 'line_type': 'Wireless', 'phone_number': '+16297580011', 'status': 'webhook_delivered'}], 'type': 'SMS', 'valid_until': None, 'webhook_failover_url': None, 'webhook_url': 'http://185.69.153.62:5000/'}, 'record_type': 'event'}
2024-05-29 12:32 UTC - ERROR - __main__:telnyx_webhook:20 - Error processing webhook: 'NoneType' object is not iterable
2024-05-29 12:38 UTC - INFO - __main__:telnyx_webhook:11 - WEBHOOK TRIGGERED
2024-05-29 12:38 UTC - DEBUG - src.services.ghl_service:ghl_processor:26 - {'event_type': 'message.received', 'id': '1543d45d-e0bc-4601-b95e-2f4352afa769', 'occurred_at': '2024-05-29T12:38:53.845+00:00', 'payload': {'autoresponse_type': None, 'cc': [], 'completed_at': None, 'cost': None, 'direction': 'inbound', 'encoding': 'GSM-7', 'errors': [], 'from': {'carrier': '', 'line_type': 'Wireline', 'phone_number': '+15874016373'}, 'id': '8e2dc0e1-649d-4936-9ead-857d42413445', 'is_spam': False, 'media': [], 'messaging_profile_id': '40018fc0-1345-4910-9c4b-07175988d9c9', 'organization_id': 'a47457cb-053c-487d-9ce6-aff2accebc3c', 'parts': 1, 'received_at': '2024-05-29T12:38:53.669+00:00', 'record_type': 'message', 'sent_at': None, 'subject': '', 'tags': [], 'text': 'Thank you. Test', 'to': [{'carrier': 'Telnyx', 'line_type': 'Wireless', 'phone_number': '+16297580011', 'status': 'webhook_delivered'}], 'type': 'SMS', 'valid_until': None, 'webhook_failover_url': None, 'webhook_url': 'http://185.69.153.62:5000/'}, 'record_type': 'event'}
2024-05-29 12:38 UTC - ERROR - __main__:telnyx_webhook:20 - Error processing webhook: 'Phone'
2024-05-29 12:38 UTC - INFO - __main__:telnyx_webhook:11 - WEBHOOK TRIGGERED
2024-05-29 12:38 UTC - DEBUG - src.services.ghl_service:ghl_processor:26 - {'event_type': 'message.received', 'id': '1543d45d-e0bc-4601-b95e-2f4352afa769', 'occurred_at': '2024-05-29T12:38:53.845+00:00', 'payload': {'autoresponse_type': None, 'cc': [], 'completed_at': None, 'cost': None, 'direction': 'inbound', 'encoding': 'GSM-7', 'errors': [], 'from': {'carrier': '', 'line_type': 'Wireline', 'phone_number': '+15874016373'}, 'id': '8e2dc0e1-649d-4936-9ead-857d42413445', 'is_spam': False, 'media': [], 'messaging_profile_id': '40018fc0-1345-4910-9c4b-07175988d9c9', 'organization_id': 'a47457cb-053c-487d-9ce6-aff2accebc3c', 'parts': 1, 'received_at': '2024-05-29T12:38:53.669+00:00', 'record_type': 'message', 'sent_at': None, 'subject': '', 'tags': [], 'text': 'Thank you. Test', 'to': [{'carrier': 'Telnyx', 'line_type': 'Wireless', 'phone_number': '+16297580011', 'status': 'webhook_delivered'}], 'type': 'SMS', 'valid_until': None, 'webhook_failover_url': None, 'webhook_url': 'http://185.69.153.62:5000/'}, 'record_type': 'event'}
2024-05-29 12:38 UTC - ERROR - __main__:telnyx_webhook:20 - Error processing webhook: 'Phone'
2024-05-29 12:43 UTC - INFO - __main__:telnyx_webhook:11 - WEBHOOK TRIGGERED
2024-05-29 12:43 UTC - DEBUG - src.services.ghl_service:ghl_processor:26 - {'event_type': 'message.received', 'id': 'a88d4327-be3d-41d3-bc21-7ee714143f4e', 'occurred_at': '2024-05-29T12:43:26.713+00:00', 'payload': {'autoresponse_type': None, 'cc': [], 'completed_at': None, 'cost': None, 'direction': 'inbound', 'encoding': 'GSM-7', 'errors': [], 'from': {'carrier': '', 'line_type': 'Wireline', 'phone_number': '+15874016373'}, 'id': 'f9afb85b-9e0e-42cc-9a04-603b5b4c97cd', 'is_spam': False, 'media': [], 'messaging_profile_id': '40018fc0-1345-4910-9c4b-07175988d9c9', 'organization_id': 'a47457cb-053c-487d-9ce6-aff2accebc3c', 'parts': 1, 'received_at': '2024-05-29T12:43:26.601+00:00', 'record_type': 'message', 'sent_at': None, 'subject': '', 'tags': [], 'text': 'Hey Jeff. Nice to meet you', 'to': [{'carrier': 'Telnyx', 'line_type': 'Wireless', 'phone_number': '+16297580011', 'status': 'webhook_delivered'}], 'type': 'SMS', 'valid_until': None, 'webhook_failover_url': None, 'webhook_url': 'http://185.69.153.62:5000/'}, 'record_type': 'event'}
2024-05-29 12:43 UTC - DEBUG - src.services.ghl_service:ghl_processor:33 - {'id': 'eo3sFIModIO4ZOu2eQCM', 'locationId': 'UMPVZWg9nwPvInCQHGuE', 'contactName': 'Oleg Lys', 'firstName': 'Oleg', 'lastName': 'Lys', 'firstNameRaw': 'Joe', 'lastNameRaw': 'Moore', 'companyName': None, 'email': None, 'phone': '+15874016373', 'dnd': False, 'dndSettings': {}, 'type': 'lead', 'source': None, 'assignedTo': None, 'city': 'Rio Grande', 'state': None, 'postalCode': None, 'address1': None, 'dateAdded': '2024-05-23T15:19:12.929Z', 'dateUpdated': '2024-05-23T15:19:12.929Z', 'dateOfBirth': None, 'businessId': None, 'tags': [], 'followers': [], 'website': None, 'additionalEmails': [], 'attributions': [{'utmSessionSource': 'CRM UI', 'medium': 'csv_import', 'isFirst': True}], 'customFields': [], 'message': '', 'telnyx_sent': True, 'telnyx_delivered': True, 'telnyx_message_id': '40318fc4-401f-4f3a-beeb-67ffd05bf33f', 'ghl_sent': False, 'ghl_delivered': False}
2024-05-29 12:43 UTC - ERROR - __main__:telnyx_webhook:20 - Error processing webhook: local variable 'contact_id' referenced before assignment
2024-05-29 12:43 UTC - INFO - __main__:telnyx_webhook:11 - WEBHOOK TRIGGERED
2024-05-29 12:43 UTC - DEBUG - src.services.ghl_service:ghl_processor:26 - {'event_type': 'message.received', 'id': 'a88d4327-be3d-41d3-bc21-7ee714143f4e', 'occurred_at': '2024-05-29T12:43:26.713+00:00', 'payload': {'autoresponse_type': None, 'cc': [], 'completed_at': None, 'cost': None, 'direction': 'inbound', 'encoding': 'GSM-7', 'errors': [], 'from': {'carrier': '', 'line_type': 'Wireline', 'phone_number': '+15874016373'}, 'id': 'f9afb85b-9e0e-42cc-9a04-603b5b4c97cd', 'is_spam': False, 'media': [], 'messaging_profile_id': '40018fc0-1345-4910-9c4b-07175988d9c9', 'organization_id': 'a47457cb-053c-487d-9ce6-aff2accebc3c', 'parts': 1, 'received_at': '2024-05-29T12:43:26.601+00:00', 'record_type': 'message', 'sent_at': None, 'subject': '', 'tags': [], 'text': 'Hey Jeff. Nice to meet you', 'to': [{'carrier': 'Telnyx', 'line_type': 'Wireless', 'phone_number': '+16297580011', 'status': 'webhook_delivered'}], 'type': 'SMS', 'valid_until': None, 'webhook_failover_url': None, 'webhook_url': 'http://185.69.153.62:5000/'}, 'record_type': 'event'}
2024-05-29 12:43 UTC - DEBUG - src.services.ghl_service:ghl_processor:33 - {'id': 'eo3sFIModIO4ZOu2eQCM', 'locationId': 'UMPVZWg9nwPvInCQHGuE', 'contactName': 'Oleg Lys', 'firstName': 'Oleg', 'lastName': 'Lys', 'firstNameRaw': 'Joe', 'lastNameRaw': 'Moore', 'companyName': None, 'email': None, 'phone': '+15874016373', 'dnd': False, 'dndSettings': {}, 'type': 'lead', 'source': None, 'assignedTo': None, 'city': 'Rio Grande', 'state': None, 'postalCode': None, 'address1': None, 'dateAdded': '2024-05-23T15:19:12.929Z', 'dateUpdated': '2024-05-23T15:19:12.929Z', 'dateOfBirth': None, 'businessId': None, 'tags': [], 'followers': [], 'website': None, 'additionalEmails': [], 'attributions': [{'utmSessionSource': 'CRM UI', 'medium': 'csv_import', 'isFirst': True}], 'customFields': [], 'message': '', 'telnyx_sent': True, 'telnyx_delivered': True, 'telnyx_message_id': '40318fc4-401f-4f3a-beeb-67ffd05bf33f', 'ghl_sent': False, 'ghl_delivered': False}
2024-05-29 12:43 UTC - ERROR - __main__:telnyx_webhook:20 - Error processing webhook: local variable 'contact_id' referenced before assignment
